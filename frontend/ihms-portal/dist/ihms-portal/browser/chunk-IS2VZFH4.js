import{a as ht}from"./chunk-FE24GOPJ.js";import{a as st,b as ct,c as ut,d as ft}from"./chunk-WP5NUATV.js";import{a as mt,b as pt}from"./chunk-CJI4PPME.js";import{a as lt,b as dt}from"./chunk-EF2XRC37.js";import"./chunk-5SHJWNIK.js";import{b as nt,c as ot}from"./chunk-AM5E43BK.js";import{a as Z,b as tt,d as et,g as it}from"./chunk-RKG5H5Y5.js";import"./chunk-DABKM3GA.js";import{a as at,b as rt}from"./chunk-5JXYUGER.js";import"./chunk-TR43IUZ2.js";import"./chunk-ZXLXF7DL.js";import{a as Y,c as Q,g as X}from"./chunk-GQNV5PIV.js";import{b as U,d,f as j,g as z,j as $,l as J,o as W,p as H,r as K}from"./chunk-WSFNJNB2.js";import{Bb as N,Da as t,Dc as w,Ea as e,Fa as f,Ib as O,Ja as _,Kb as k,Lb as P,Ma as I,Mc as q,Oa as x,Qc as L,Rc as V,S as M,Sc as B,Tc as R,Uc as G,Va as D,W as g,Wa as i,X as v,Xa as y,Ya as h,Za as b,db as F,fa as r,ga as c,sa as u,ua as m,vb as A,wb as T}from"./chunk-GX3TN4JH.js";import{a as E,b as C}from"./chunk-35PI25VP.js";function St(a,l){if(a&1&&(t(0,"mat-option",24),i(1),e()),a&2){let n=l.$implicit;m("value",n.id),r(),h(" ",n.name," ")}}function gt(a,l){if(a&1&&(t(0,"mat-option",24),i(1),e()),a&2){let n=l.$implicit;m("value",n.id),r(),h(" ",n.name," ")}}function vt(a,l){if(a&1&&(t(0,"mat-option",24),i(1),e()),a&2){let n=l.$implicit;m("value",n.id),r(),b(" ",n.name," - ",n.specialization," ")}}function It(a,l){if(a&1&&(t(0,"mat-option",24),i(1),e()),a&2){let n=l.$implicit;m("value",n),r(),h(" ",n," ")}}function Et(a,l){a&1&&f(0,"mat-spinner",32)}function Ct(a,l){if(a&1&&(t(0,"span"),i(1),e()),a&2){let n=x();r(),h("",n.isEditMode?"Update":"Book"," Appointment")}}var Kt=(()=>{class a{constructor(n,o,p,s,S){this.fb=n,this.route=o,this.router=p,this.appointmentService=s,this.snackBar=S,this.isEditMode=!1,this.isLoading=!1,this.appointmentId=null,this.minDate=new Date,this.patients=[{id:1,name:"John Doe"},{id:2,name:"Jane Smith"},{id:3,name:"Bob Wilson"}],this.departments=[{id:1,name:"General Medicine"},{id:2,name:"Cardiology"},{id:3,name:"Orthopedics"},{id:4,name:"Pediatrics"}],this.doctors=[{id:1,name:"Dr. Smith",departmentId:1,specialization:"General Physician"},{id:2,name:"Dr. Johnson",departmentId:2,specialization:"Cardiologist"},{id:3,name:"Dr. Davis",departmentId:3,specialization:"Orthopedic Surgeon"},{id:4,name:"Dr. Williams",departmentId:4,specialization:"Pediatrician"}],this.filteredDoctors=[],this.timeSlots=["09:00","09:30","10:00","10:30","11:00","11:30","14:00","14:30","15:00","15:30","16:00","16:30"],this.appointmentForm=this.fb.group({patientId:["",d.required],departmentId:["",d.required],doctorId:["",d.required],appointmentDate:["",d.required],appointmentTime:["",d.required],type:["CONSULTATION",d.required],duration:[30],reason:["",d.required],notes:[""]})}ngOnInit(){let n=this.route.snapshot.queryParamMap.get("patientId");n&&this.appointmentForm.patchValue({patientId:+n});let o=this.route.snapshot.paramMap.get("id");o&&(this.isEditMode=!0,this.appointmentId=+o,this.loadAppointment(this.appointmentId))}loadAppointment(n){this.appointmentService.getAppointment(n).subscribe({next:o=>{this.appointmentForm.patchValue({patientId:o.patientId,departmentId:o.departmentId,doctorId:o.doctorId,appointmentDate:new Date(o.appointmentDate),appointmentTime:o.appointmentTime,type:o.type,duration:o.duration,reason:o.reason,notes:o.notes}),this.onDepartmentChange()},error:()=>{this.router.navigate(["/appointments"])}})}onDepartmentChange(){let n=this.appointmentForm.get("departmentId")?.value;this.filteredDoctors=this.doctors.filter(o=>o.departmentId===n),this.isEditMode||this.appointmentForm.patchValue({doctorId:""})}onSubmit(){if(this.appointmentForm.invalid)return;this.isLoading=!0;let n=this.appointmentForm.value,o=C(E({},n),{appointmentDate:n.appointmentDate.toISOString().split("T")[0]});(this.isEditMode?this.appointmentService.updateAppointment(this.appointmentId,o):this.appointmentService.createAppointment(o)).subscribe({next:()=>{this.snackBar.open(`Appointment ${this.isEditMode?"updated":"booked"} successfully`,"Close",{duration:3e3}),this.router.navigate(["/appointments"])},error:()=>{this.isLoading=!1,this.snackBar.open("An error occurred. Please try again.","Close",{duration:3e3})}})}static{this.\u0275fac=function(o){return new(o||a)(c(H),c(O),c(k),c(ht),c(mt))}}static{this.\u0275cmp=M({type:a,selectors:[["app-appointment-form"]],standalone:!0,features:[F],decls:101,vars:16,consts:[["picker",""],[1,"container"],[1,"page-header-row"],["mat-icon-button","","routerLink","/appointments"],[1,"inline-header"],[1,"form-container"],[3,"ngSubmit","formGroup"],[1,"form-row"],["appearance","outline"],["formControlName","patientId"],[3,"value",4,"ngFor","ngForOf"],["formControlName","departmentId",3,"selectionChange"],["appearance","outline",1,"form-field-full"],["formControlName","doctorId"],["matInput","","formControlName","appointmentDate",3,"matDatepicker","min"],["matSuffix","",3,"for"],["formControlName","appointmentTime"],["formControlName","type"],["value","CONSULTATION"],["value","FOLLOW_UP"],["value","ROUTINE_CHECKUP"],["value","SPECIALIST"],["value","EMERGENCY"],["formControlName","duration"],[3,"value"],["matInput","","formControlName","reason","rows","3"],["matInput","","formControlName","notes","rows","3"],[1,"actions-row"],["mat-button","","type","button","routerLink","/appointments"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["diameter","20",4,"ngIf"],[4,"ngIf"],["diameter","20"]],template:function(o,p){if(o&1){let s=_();t(0,"div",1)(1,"div",2)(2,"div")(3,"button",3)(4,"mat-icon"),i(5,"arrow_back"),e()(),t(6,"h1",4),i(7),e()()(),t(8,"mat-card",5)(9,"mat-card-content")(10,"form",6),I("ngSubmit",function(){return g(s),v(p.onSubmit())}),t(11,"h3"),i(12,"Patient & Doctor"),e(),t(13,"div",7)(14,"mat-form-field",8)(15,"mat-label"),i(16,"Patient"),e(),t(17,"mat-select",9),u(18,St,2,2,"mat-option",10),e(),t(19,"mat-error"),i(20,"Patient is required"),e()(),t(21,"mat-form-field",8)(22,"mat-label"),i(23,"Department"),e(),t(24,"mat-select",11),I("selectionChange",function(){return g(s),v(p.onDepartmentChange())}),u(25,gt,2,2,"mat-option",10),e(),t(26,"mat-error"),i(27,"Department is required"),e()()(),t(28,"mat-form-field",12)(29,"mat-label"),i(30,"Doctor"),e(),t(31,"mat-select",13),u(32,vt,2,3,"mat-option",10),e(),t(33,"mat-error"),i(34,"Doctor is required"),e()(),t(35,"h3"),i(36,"Date & Time"),e(),t(37,"div",7)(38,"mat-form-field",8)(39,"mat-label"),i(40,"Appointment Date"),e(),f(41,"input",14)(42,"mat-datepicker-toggle",15)(43,"mat-datepicker",null,0),t(45,"mat-error"),i(46,"Date is required"),e()(),t(47,"mat-form-field",8)(48,"mat-label"),i(49,"Time"),e(),t(50,"mat-select",16),u(51,It,2,2,"mat-option",10),e(),t(52,"mat-error"),i(53,"Time is required"),e()()(),t(54,"div",7)(55,"mat-form-field",8)(56,"mat-label"),i(57,"Appointment Type"),e(),t(58,"mat-select",17)(59,"mat-option",18),i(60,"Consultation"),e(),t(61,"mat-option",19),i(62,"Follow Up"),e(),t(63,"mat-option",20),i(64,"Routine Checkup"),e(),t(65,"mat-option",21),i(66,"Specialist"),e(),t(67,"mat-option",22),i(68,"Emergency"),e()(),t(69,"mat-error"),i(70,"Type is required"),e()(),t(71,"mat-form-field",8)(72,"mat-label"),i(73,"Duration (minutes)"),e(),t(74,"mat-select",23)(75,"mat-option",24),i(76,"15 min"),e(),t(77,"mat-option",24),i(78,"30 min"),e(),t(79,"mat-option",24),i(80,"45 min"),e(),t(81,"mat-option",24),i(82,"60 min"),e()()()(),t(83,"h3"),i(84,"Details"),e(),t(85,"mat-form-field",12)(86,"mat-label"),i(87,"Reason for Visit"),e(),f(88,"textarea",25),t(89,"mat-error"),i(90,"Reason is required"),e()(),t(91,"mat-form-field",12)(92,"mat-label"),i(93,"Additional Notes"),e(),f(94,"textarea",26),e(),t(95,"div",27)(96,"button",28),i(97,"Cancel"),e(),t(98,"button",29),u(99,Et,1,0,"mat-spinner",30)(100,Ct,2,1,"span",31),e()()()()()()}if(o&2){let s=D(44);r(7),y(p.isEditMode?"Edit Appointment":"New Appointment"),r(3),m("formGroup",p.appointmentForm),r(8),m("ngForOf",p.patients),r(7),m("ngForOf",p.departments),r(7),m("ngForOf",p.filteredDoctors),r(9),m("matDatepicker",s)("min",p.minDate),r(),m("for",s),r(9),m("ngForOf",p.timeSlots),r(24),m("value",15),r(2),m("value",30),r(2),m("value",45),r(2),m("value",60),r(17),m("disabled",p.isLoading||p.appointmentForm.invalid),r(),m("ngIf",p.isLoading),r(),m("ngIf",!p.isLoading)}},dependencies:[N,A,T,K,$,U,j,z,J,W,P,X,Y,Q,ot,nt,it,Z,tt,et,B,L,V,G,R,dt,lt,q,ft,st,ct,ut,w,pt,rt,at],styles:[".page-header-row[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:24px}.inline-header[_ngcontent-%COMP%]{display:inline;margin-left:8px}.form-row[_ngcontent-%COMP%]{display:flex;gap:16px}.form-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1}h3[_ngcontent-%COMP%]{margin-top:24px;margin-bottom:16px;color:#666}h3[_ngcontent-%COMP%]:first-of-type{margin-top:0}"]})}}return a})();export{Kt as AppointmentFormComponent};

import{a as ct}from"./chunk-C6IFH2AY.js";import{a as rt}from"./chunk-3SVYOAF2.js";import{a as lt,b as mt}from"./chunk-N465ETK5.js";import{a as K,b as U,c as W,d as X,e as Y,f as Z,g as tt,h as et,i as nt,j as it,k as at,l as ot}from"./chunk-KOXJSXBS.js";import"./chunk-EF2XRC37.js";import"./chunk-5SHJWNIK.js";import"./chunk-RKG5H5Y5.js";import"./chunk-DABKM3GA.js";import{a as G,b as J}from"./chunk-5JXYUGER.js";import"./chunk-TR43IUZ2.js";import"./chunk-ZXLXF7DL.js";import{a as j,b as A,c as B,f as V,g as Q}from"./chunk-GQNV5PIV.js";import"./chunk-WSFNJNB2.js";import{Bb as z,Da as n,Ea as a,Fa as u,Ga as d,Ha as s,Ja as I,Lb as R,Ma as h,Oa as f,Qc as q,Rc as N,S,Sc as $,Tc as F,Uc as H,W as y,Wa as o,X as v,Xa as _,Ya as g,Za as M,db as w,eb as E,fa as r,ga as b,hb as k,ib as D,sa as m,ua as p,ub as T,vb as P,wa as C,wb as L,zb as O}from"./chunk-GX3TN4JH.js";import"./chunk-35PI25VP.js";var dt=()=>[10,25,50];function st(t,i){if(t&1&&(n(0,"span",14),o(1),a()),t&2){let e=i.$implicit;r(),M(" ",e.medicationName," (",e.quantity," left) ")}}function ft(t,i){if(t&1&&(n(0,"mat-card",10)(1,"mat-card-header")(2,"mat-icon",11),o(3,"warning"),a(),n(4,"mat-card-title"),o(5,"Low Stock Alerts"),a()(),n(6,"mat-card-content")(7,"div",12),m(8,st,2,2,"span",13),a()()()),t&2){let e=f();r(8),p("ngForOf",e.lowStockItems)}}function _t(t,i){t&1&&(n(0,"div",15),u(1,"mat-spinner",16),a())}function ut(t,i){t&1&&(n(0,"th",30),o(1,"Medication"),a())}function gt(t,i){if(t&1&&(n(0,"td",31),o(1),a()),t&2){let e=i.$implicit;r(),_(e.medicationName)}}function Ct(t,i){t&1&&(n(0,"th",30),o(1,"Batch #"),a())}function ht(t,i){if(t&1&&(n(0,"td",31),o(1),a()),t&2){let e=i.$implicit;r(),_(e.batchNumber)}}function xt(t,i){t&1&&(n(0,"th",30),o(1,"Quantity"),a())}function St(t,i){if(t&1&&(n(0,"td",31)(1,"span"),o(2),a()()),t&2){let e=i.$implicit;r(),C("low-stock",e.quantity<=e.reorderLevel),r(),g(" ",e.quantity," ")}}function yt(t,i){t&1&&(n(0,"th",30),o(1,"Reorder Level"),a())}function vt(t,i){if(t&1&&(n(0,"td",31),o(1),a()),t&2){let e=i.$implicit;r(),_(e.reorderLevel)}}function bt(t,i){t&1&&(n(0,"th",30),o(1,"Expiry Date"),a())}function It(t,i){if(t&1&&(n(0,"td",31)(1,"span"),o(2),k(3,"date"),a()()),t&2){let e=i.$implicit,l=f(2);r(),C("expiring-soon",l.isExpiringSoon(e.expiryDate)),r(),g(" ",D(3,3,e.expiryDate)," ")}}function Mt(t,i){t&1&&(n(0,"th",30),o(1,"Location"),a())}function wt(t,i){if(t&1&&(n(0,"td",31),o(1),a()),t&2){let e=i.$implicit;r(),_(e.location)}}function Et(t,i){t&1&&(n(0,"th",30),o(1,"Status"),a())}function kt(t,i){if(t&1&&(n(0,"td",31)(1,"span",32),o(2),a()()),t&2){let e=i.$implicit,l=f(2);r(),p("ngClass",l.getStockStatus(e)),r(),g(" ",l.getStockStatusLabel(e)," ")}}function Dt(t,i){t&1&&(n(0,"th",30),o(1,"Actions"),a())}function Tt(t,i){if(t&1){let e=I();n(0,"td",31)(1,"button",33),h("click",function(){let c=y(e).$implicit,x=f(2);return v(x.adjustStock(c))}),n(2,"mat-icon"),o(3,"edit"),a()()()}}function Pt(t,i){t&1&&u(0,"tr",34)}function Lt(t,i){t&1&&u(0,"tr",35)}function Ot(t,i){if(t&1&&(n(0,"table",17),d(1,18),m(2,ut,2,0,"th",19)(3,gt,2,1,"td",20),s(),d(4,21),m(5,Ct,2,0,"th",19)(6,ht,2,1,"td",20),s(),d(7,22),m(8,xt,2,0,"th",19)(9,St,3,3,"td",20),s(),d(10,23),m(11,yt,2,0,"th",19)(12,vt,2,1,"td",20),s(),d(13,24),m(14,bt,2,0,"th",19)(15,It,4,5,"td",20),s(),d(16,25),m(17,Mt,2,0,"th",19)(18,wt,2,1,"td",20),s(),d(19,26),m(20,Et,2,0,"th",19)(21,kt,3,2,"td",20),s(),d(22,27),m(23,Dt,2,0,"th",19)(24,Tt,4,0,"td",20),s(),m(25,Pt,1,0,"tr",28)(26,Lt,1,0,"tr",29),a()),t&2){let e=f();p("dataSource",e.dataSource),r(25),p("matHeaderRowDef",e.displayedColumns),r(),p("matRowDefColumns",e.displayedColumns)}}var Yt=(()=>{class t{constructor(e){this.pharmacyService=e,this.displayedColumns=["medication","batchNumber","quantity","reorderLevel","expiryDate","location","status","actions"],this.dataSource=new ot,this.lowStockItems=[],this.isLoading=!1,this.pageSize=10,this.totalElements=0}ngOnInit(){this.loadInventory(),this.loadLowStockAlerts()}loadInventory(e=0){this.isLoading=!0,this.pharmacyService.getInventory(e,this.pageSize).subscribe({next:l=>{this.dataSource.data=l.content,this.totalElements=l.totalElements,this.isLoading=!1},error:()=>{this.isLoading=!1}})}loadLowStockAlerts(){this.pharmacyService.getLowStockItems().subscribe({next:e=>{this.lowStockItems=e}})}onPageChange(e){this.pageSize=e.pageSize,this.loadInventory(e.pageIndex)}isExpiringSoon(e){let l=new Date(e),c=new Date;return c.setMonth(c.getMonth()+3),l<=c}getStockStatus(e){return e.quantity===0?"out-of-stock":e.quantity<=e.reorderLevel?"low-stock":"in-stock"}getStockStatusLabel(e){return e.quantity===0?"Out of Stock":e.quantity<=e.reorderLevel?"Low Stock":"In Stock"}adjustStock(e){console.log("Adjust stock for:",e)}static{this.\u0275fac=function(l){return new(l||t)(b(ct))}}static{this.\u0275cmp=S({type:t,selectors:[["app-inventory"]],standalone:!0,features:[w],decls:19,vars:7,consts:[[1,"container"],[1,"page-header-row"],[1,"nav-buttons"],["mat-button","","routerLink","/pharmacy/medications"],["mat-button","","routerLink","/pharmacy/prescriptions"],["mat-raised-button","","color","primary"],["class","alert-card",4,"ngIf"],["class","loading-spinner",4,"ngIf"],["mat-table","","class","full-width",3,"dataSource",4,"ngIf"],[3,"page","length","pageSize","pageSizeOptions"],[1,"alert-card"],["color","warn"],[1,"alert-chips"],["class","alert-chip",4,"ngFor","ngForOf"],[1,"alert-chip"],[1,"loading-spinner"],["diameter","40"],["mat-table","",1,"full-width",3,"dataSource"],["matColumnDef","medication"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","batchNumber"],["matColumnDef","quantity"],["matColumnDef","reorderLevel"],["matColumnDef","expiryDate"],["matColumnDef","location"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"status-chip",3,"ngClass"],["mat-icon-button","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(l,c){l&1&&(n(0,"div",0)(1,"div",1)(2,"h1"),o(3,"Inventory Management"),a(),n(4,"div",2)(5,"button",3),o(6,"Medications"),a(),n(7,"button",4),o(8,"Prescriptions"),a(),n(9,"button",5)(10,"mat-icon"),o(11,"add"),a(),o(12," Add Stock "),a()()(),m(13,ft,9,1,"mat-card",6),n(14,"mat-card")(15,"mat-card-content"),m(16,_t,2,0,"div",7)(17,Ot,27,3,"table",8),n(18,"mat-paginator",9),h("page",function(pt){return c.onPageChange(pt)}),a()()()()),l&2&&(r(13),p("ngIf",c.lowStockItems.length>0),r(3),p("ngIf",c.isLoading),r(),p("ngIf",!c.isLoading),r(),p("length",c.totalElements)("pageSize",c.pageSize)("pageSizeOptions",E(6,dt)))},dependencies:[z,T,P,L,O,R,at,K,W,tt,X,U,et,Y,Z,nt,it,mt,lt,Q,j,B,V,A,$,q,N,H,F,J,G,rt],styles:[".page-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.nav-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.alert-card[_ngcontent-%COMP%]{margin-bottom:16px;border-left:4px solid #ff9800}.alert-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.alert-chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.alert-chip[_ngcontent-%COMP%]{background-color:#fff3e0;padding:4px 12px;border-radius:16px;font-size:12px}.full-width[_ngcontent-%COMP%]{width:100%}.loading-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:40px}.low-stock[_ngcontent-%COMP%]{color:#f44336;font-weight:500}.expiring-soon[_ngcontent-%COMP%]{color:#ff9800}.status-chip[_ngcontent-%COMP%]{padding:4px 12px;border-radius:16px;font-size:12px;font-weight:500}.status-chip.in-stock[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.status-chip.low-stock[_ngcontent-%COMP%]{background-color:#ff9800;color:#fff}.status-chip.out-of-stock[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}"]})}}return t})();export{Yt as InventoryComponent};

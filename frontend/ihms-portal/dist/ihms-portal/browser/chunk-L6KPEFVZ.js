import{a as rt}from"./chunk-C6IFH2AY.js";import{a as nt}from"./chunk-3SVYOAF2.js";import{a as at,b as ot}from"./chunk-N465ETK5.js";import{a as q,b as J,c as K,d as Q,e as U,f as W,g as X,h as Y,i as Z,j as tt,k as et,l as it}from"./chunk-KOXJSXBS.js";import{a as A,b as G}from"./chunk-CJI4PPME.js";import"./chunk-EF2XRC37.js";import"./chunk-5SHJWNIK.js";import"./chunk-RKG5H5Y5.js";import"./chunk-DABKM3GA.js";import{a as j,b as F}from"./chunk-5JXYUGER.js";import"./chunk-TR43IUZ2.js";import"./chunk-ZXLXF7DL.js";import{a as $,c as H,g as V}from"./chunk-GQNV5PIV.js";import"./chunk-WSFNJNB2.js";import{Bb as I,Da as n,Ea as a,Fa as C,Ga as c,Ha as d,Ja as S,Lb as k,Ma as h,Oa as _,Qc as z,Rc as O,S as M,Sc as B,Tc as R,Uc as N,W as g,Wa as o,X as x,Xa as f,Ya as P,db as v,eb as y,fa as r,ga as b,hb as E,ib as w,sa as l,ua as p,ub as L,wb as D,zb as T}from"./chunk-GX3TN4JH.js";import"./chunk-35PI25VP.js";var lt=()=>[10,25,50];function mt(t,i){t&1&&(n(0,"div",8),C(1,"mat-spinner",9),a())}function pt(t,i){t&1&&(n(0,"th",22),o(1,"Prescription #"),a())}function ct(t,i){if(t&1&&(n(0,"td",23),o(1),a()),t&2){let e=i.$implicit;r(),f(e.prescriptionNumber)}}function dt(t,i){t&1&&(n(0,"th",22),o(1,"Patient"),a())}function _t(t,i){if(t&1&&(n(0,"td",23),o(1),a()),t&2){let e=i.$implicit;r(),f(e.patientName)}}function ft(t,i){t&1&&(n(0,"th",22),o(1,"Prescribed By"),a())}function ut(t,i){if(t&1&&(n(0,"td",23),o(1),a()),t&2){let e=i.$implicit;r(),f(e.doctorName)}}function Ct(t,i){t&1&&(n(0,"th",22),o(1,"Date"),a())}function ht(t,i){if(t&1&&(n(0,"td",23),o(1),E(2,"date"),a()),t&2){let e=i.$implicit;r(),f(w(2,1,e.prescribedDate))}}function gt(t,i){t&1&&(n(0,"th",22),o(1,"Items"),a())}function xt(t,i){if(t&1&&(n(0,"td",23),o(1),a()),t&2){let e=i.$implicit;r(),P("",(e.items==null?null:e.items.length)||0," medication(s)")}}function bt(t,i){t&1&&(n(0,"th",22),o(1,"Status"),a())}function St(t,i){if(t&1&&(n(0,"td",23)(1,"span",24),o(2),a()()),t&2){let e=i.$implicit;r(),p("ngClass",e.status.toLowerCase()),r(),P(" ",e.status," ")}}function Pt(t,i){t&1&&(n(0,"th",22),o(1,"Actions"),a())}function Mt(t,i){if(t&1){let e=S();n(0,"button",27),h("click",function(){g(e);let m=_().$implicit,u=_(2);return x(u.dispensePrescription(m))}),o(1," Dispense "),a()}}function vt(t,i){if(t&1){let e=S();n(0,"td",23)(1,"button",25),h("click",function(){let m=g(e).$implicit,u=_(2);return x(u.viewDetails(m))}),n(2,"mat-icon"),o(3,"visibility"),a()(),l(4,Mt,2,0,"button",26),a()}if(t&2){let e=i.$implicit;r(4),p("ngIf",e.status==="PENDING")}}function yt(t,i){t&1&&C(0,"tr",28)}function Et(t,i){t&1&&C(0,"tr",29)}function wt(t,i){if(t&1&&(n(0,"table",10),c(1,11),l(2,pt,2,0,"th",12)(3,ct,2,1,"td",13),d(),c(4,14),l(5,dt,2,0,"th",12)(6,_t,2,1,"td",13),d(),c(7,15),l(8,ft,2,0,"th",12)(9,ut,2,1,"td",13),d(),c(10,16),l(11,Ct,2,0,"th",12)(12,ht,3,3,"td",13),d(),c(13,17),l(14,gt,2,0,"th",12)(15,xt,2,1,"td",13),d(),c(16,18),l(17,bt,2,0,"th",12)(18,St,3,2,"td",13),d(),c(19,19),l(20,Pt,2,0,"th",12)(21,vt,5,1,"td",13),d(),l(22,yt,1,0,"tr",20)(23,Et,1,0,"tr",21),a()),t&2){let e=_();p("dataSource",e.dataSource),r(22),p("matHeaderRowDef",e.displayedColumns),r(),p("matRowDefColumns",e.displayedColumns)}}var Qt=(()=>{class t{constructor(e,s){this.pharmacyService=e,this.snackBar=s,this.displayedColumns=["prescriptionNumber","patient","doctor","date","items","status","actions"],this.dataSource=new it,this.isLoading=!1,this.pageSize=10,this.totalElements=0}ngOnInit(){this.loadPrescriptions()}loadPrescriptions(e=0){this.isLoading=!0,this.pharmacyService.getPrescriptions(e,this.pageSize).subscribe({next:s=>{this.dataSource.data=s.content,this.totalElements=s.totalElements,this.isLoading=!1},error:()=>{this.isLoading=!1}})}onPageChange(e){this.pageSize=e.pageSize,this.loadPrescriptions(e.pageIndex)}viewDetails(e){console.log("View prescription:",e)}dispensePrescription(e){confirm("Are you sure you want to dispense this prescription?")&&this.pharmacyService.dispensePrescription(e.id).subscribe({next:()=>{this.snackBar.open("Prescription dispensed successfully","Close",{duration:3e3}),this.loadPrescriptions()},error:()=>{this.snackBar.open("Error dispensing prescription","Close",{duration:3e3})}})}static{this.\u0275fac=function(s){return new(s||t)(b(rt),b(A))}}static{this.\u0275cmp=M({type:t,selectors:[["app-prescription-list"]],standalone:!0,features:[v],decls:14,vars:6,consts:[[1,"container"],[1,"page-header-row"],[1,"nav-buttons"],["mat-button","","routerLink","/pharmacy/medications"],["mat-button","","routerLink","/pharmacy/inventory"],["class","loading-spinner",4,"ngIf"],["mat-table","","class","full-width",3,"dataSource",4,"ngIf"],[3,"page","length","pageSize","pageSizeOptions"],[1,"loading-spinner"],["diameter","40"],["mat-table","",1,"full-width",3,"dataSource"],["matColumnDef","prescriptionNumber"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","patient"],["matColumnDef","doctor"],["matColumnDef","date"],["matColumnDef","items"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"status-chip",3,"ngClass"],["mat-icon-button","",3,"click"],["mat-raised-button","","color","primary","size","small",3,"click",4,"ngIf"],["mat-raised-button","","color","primary","size","small",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(s,m){s&1&&(n(0,"div",0)(1,"div",1)(2,"h1"),o(3,"Prescriptions"),a(),n(4,"div",2)(5,"button",3),o(6,"Medications"),a(),n(7,"button",4),o(8,"Inventory"),a()()(),n(9,"mat-card")(10,"mat-card-content"),l(11,mt,2,0,"div",5)(12,wt,24,3,"table",6),n(13,"mat-paginator",7),h("page",function(st){return m.onPageChange(st)}),a()()()()),s&2&&(r(11),p("ngIf",m.isLoading),r(),p("ngIf",!m.isLoading),r(),p("length",m.totalElements)("pageSize",m.pageSize)("pageSizeOptions",y(5,lt)))},dependencies:[I,L,D,T,k,et,q,K,X,Q,J,Y,U,W,Z,tt,ot,at,V,$,H,B,z,O,N,R,nt,F,j,G],styles:[".page-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.nav-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.full-width[_ngcontent-%COMP%]{width:100%}.loading-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:40px}.status-chip[_ngcontent-%COMP%]{padding:4px 12px;border-radius:16px;font-size:12px;font-weight:500}.status-chip.pending[_ngcontent-%COMP%]{background-color:#ff9800;color:#fff}.status-chip.dispensed[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.status-chip.cancelled[_ngcontent-%COMP%]{background-color:#9e9e9e;color:#fff}"]})}}return t})();export{Qt as PrescriptionListComponent};

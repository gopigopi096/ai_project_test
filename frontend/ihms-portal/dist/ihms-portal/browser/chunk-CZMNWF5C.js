import{a as R}from"./chunk-7WQIBAX7.js";import{b as $,c as ee}from"./chunk-AM5E43BK.js";import{a as K,b as Q,c as X,d as Y,g as Z}from"./chunk-RKG5H5Y5.js";import{a as te,b as ie}from"./chunk-5JXYUGER.js";import"./chunk-TR43IUZ2.js";import{a as A,b as G,c as V,d as H,e as W,f as z,g as J}from"./chunk-GQNV5PIV.js";import{b as N,d as g,f as q,g as O,j,l as k,o as U,p as B,r as D}from"./chunk-WSFNJNB2.js";import{Bb as x,Da as e,Ea as t,Fa as c,Ib as y,Kb as I,Lb as E,Ma as f,Oa as _,Qc as P,Rc as L,S as M,Sc as w,Tc as F,Uc as T,Wa as n,Xa as v,Ya as S,db as b,fa as o,ga as d,sa as p,ua as a,wb as C}from"./chunk-GX3TN4JH.js";import"./chunk-35PI25VP.js";function re(i,u){i&1&&(e(0,"mat-error"),n(1," Username is required "),t())}function ne(i,u){i&1&&(e(0,"mat-error"),n(1," Password is required "),t())}function oe(i,u){if(i&1&&(e(0,"div",13),n(1),t()),i&2){let m=_();o(),S(" ",m.errorMessage," ")}}function ae(i,u){i&1&&c(0,"mat-spinner",14)}function me(i,u){i&1&&(e(0,"span"),n(1,"Sign In"),t())}var Pe=(()=>{class i{constructor(m,s,r,l){this.fb=m,this.authService=s,this.router=r,this.route=l,this.isLoading=!1,this.hidePassword=!0,this.errorMessage="",this.loginForm=this.fb.group({username:["",g.required],password:["",g.required]}),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/dashboard"}onSubmit(){this.loginForm.invalid||(this.isLoading=!0,this.errorMessage="",this.authService.login(this.loginForm.value).subscribe({next:()=>{this.router.navigateByUrl(this.returnUrl)},error:m=>{this.isLoading=!1,this.errorMessage=m.error?.message||"Invalid username or password"}}))}static{this.\u0275fac=function(s){return new(s||i)(d(B),d(R),d(I),d(y))}}static{this.\u0275cmp=M({type:i,selectors:[["app-login"]],standalone:!0,features:[b],decls:35,vars:9,consts:[[1,"login-container"],[1,"login-card"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"form-field-full"],["matInput","","formControlName","username","placeholder","Enter your username"],["matPrefix",""],[4,"ngIf"],["matInput","","formControlName","password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["class","error-message",4,"ngIf"],["mat-raised-button","","color","primary","type","submit",1,"submit-btn",3,"disabled"],["diameter","20",4,"ngIf"],["routerLink","/auth/register"],[1,"error-message"],["diameter","20"]],template:function(s,r){if(s&1&&(e(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),n(4,"Welcome to IHMS"),t(),e(5,"mat-card-subtitle"),n(6,"Sign in to your account"),t()(),e(7,"mat-card-content")(8,"form",2),f("ngSubmit",function(){return r.onSubmit()}),e(9,"mat-form-field",3)(10,"mat-label"),n(11,"Username"),t(),c(12,"input",4),e(13,"mat-icon",5),n(14,"person"),t(),p(15,re,2,0,"mat-error",6),t(),e(16,"mat-form-field",3)(17,"mat-label"),n(18,"Password"),t(),c(19,"input",7),e(20,"mat-icon",5),n(21,"lock"),t(),e(22,"button",8),f("click",function(){return r.hidePassword=!r.hidePassword}),e(23,"mat-icon"),n(24),t()(),p(25,ne,2,0,"mat-error",6),t(),p(26,oe,2,1,"div",9),e(27,"button",10),p(28,ae,1,0,"mat-spinner",11)(29,me,2,0,"span",6),t()()(),e(30,"mat-card-actions")(31,"p"),n(32,"Don't have an account? "),e(33,"a",12),n(34,"Register here"),t()()()()()),s&2){let l,h;o(8),a("formGroup",r.loginForm),o(7),a("ngIf",(l=r.loginForm.get("username"))==null?null:l.hasError("required")),o(4),a("type",r.hidePassword?"password":"text"),o(5),v(r.hidePassword?"visibility_off":"visibility"),o(),a("ngIf",(h=r.loginForm.get("password"))==null?null:h.hasError("required")),o(),a("ngIf",r.errorMessage),o(),a("disabled",r.isLoading),o(),a("ngIf",r.isLoading),o(),a("ngIf",!r.isLoading)}},dependencies:[x,C,D,j,N,q,O,k,U,E,J,A,W,V,z,H,G,ee,$,Z,K,Q,X,Y,w,P,L,T,F,ie,te],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:80vh}.login-card[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:20px}mat-card-header[_ngcontent-%COMP%]{justify-content:center;margin-bottom:20px}.form-field-full[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.submit-btn[_ngcontent-%COMP%]{width:100%;height:48px}.error-message[_ngcontent-%COMP%]{color:#f44336;margin-bottom:16px;text-align:center}mat-card-actions[_ngcontent-%COMP%]{text-align:center}"]})}}return i})();export{Pe as LoginComponent};

import{a as rt}from"./chunk-ZVF4A3NO.js";import{a as at}from"./chunk-3SVYOAF2.js";import{a as ot,b as lt}from"./chunk-N465ETK5.js";import{a as G,b as J,c as K,d as Q,e as W,f as X,g as Y,h as Z,i as tt,j as et,k as it,l as nt}from"./chunk-KOXJSXBS.js";import"./chunk-EF2XRC37.js";import"./chunk-5SHJWNIK.js";import"./chunk-RKG5H5Y5.js";import"./chunk-DABKM3GA.js";import{a as V,b as q}from"./chunk-5JXYUGER.js";import"./chunk-TR43IUZ2.js";import"./chunk-ZXLXF7DL.js";import{a as A,c as F,g as U}from"./chunk-GQNV5PIV.js";import"./chunk-WSFNJNB2.js";import{Ab as O,Bb as R,Da as n,Ea as a,Fa as C,Ga as d,Ha as s,Ja as L,Lb as $,Ma as h,Oa as b,Qc as z,Rc as B,S,Sc as H,Tc as N,Uc as j,W as x,Wa as o,X as I,Xa as g,Ya as f,db as w,eb as E,fa as l,fb as T,ga as M,hb as u,ib as D,jb as v,sa as r,ua as p,ub as P,wb as y,zb as k}from"./chunk-GX3TN4JH.js";import"./chunk-35PI25VP.js";var ct=()=>[5,10,25],pt=t=>["/billing",t];function dt(t,i){t&1&&(n(0,"div",6),C(1,"mat-spinner",7),a())}function st(t,i){t&1&&(n(0,"th",21),o(1,"Invoice #"),a())}function _t(t,i){if(t&1&&(n(0,"td",22),o(1),a()),t&2){let e=i.$implicit;l(),g(e.invoiceNumber)}}function ft(t,i){t&1&&(n(0,"th",21),o(1,"Patient"),a())}function ut(t,i){if(t&1&&(n(0,"td",22),o(1),a()),t&2){let e=i.$implicit;l(),g(e.patientName)}}function Ct(t,i){t&1&&(n(0,"th",21),o(1,"Date"),a())}function gt(t,i){if(t&1&&(n(0,"td",22),o(1),u(2,"date"),a()),t&2){let e=i.$implicit;l(),g(D(2,1,e.createdAt))}}function vt(t,i){t&1&&(n(0,"th",21),o(1,"Total"),a())}function ht(t,i){if(t&1&&(n(0,"td",22),o(1),u(2,"number"),a()),t&2){let e=i.$implicit;l(),f("$",v(2,1,e.totalAmount,"1.2-2"),"")}}function bt(t,i){t&1&&(n(0,"th",21),o(1,"Paid"),a())}function St(t,i){if(t&1&&(n(0,"td",22),o(1),u(2,"number"),a()),t&2){let e=i.$implicit;l(),f("$",v(2,1,e.paidAmount,"1.2-2"),"")}}function xt(t,i){t&1&&(n(0,"th",21),o(1,"Balance"),a())}function It(t,i){if(t&1&&(n(0,"td",22),o(1),u(2,"number"),a()),t&2){let e=i.$implicit;l(),f("$",v(2,1,e.balanceAmount,"1.2-2"),"")}}function Mt(t,i){t&1&&(n(0,"th",21),o(1,"Status"),a())}function Lt(t,i){if(t&1&&(n(0,"td",22)(1,"span",23),o(2),a()()),t&2){let e=i.$implicit;l(),p("ngClass",e.status.toLowerCase()),l(),f(" ",e.status," ")}}function wt(t,i){t&1&&(n(0,"th",21),o(1,"Actions"),a())}function Et(t,i){if(t&1){let e=L();n(0,"td",22)(1,"button",24)(2,"mat-icon"),o(3,"visibility"),a()(),n(4,"button",25),h("click",function(){let c=x(e).$implicit,_=b(2);return I(_.downloadPdf(c.id))}),n(5,"mat-icon"),o(6,"download"),a()()()}if(t&2){let e=i.$implicit;l(),p("routerLink",T(1,pt,e.id))}}function Tt(t,i){t&1&&C(0,"tr",26)}function Dt(t,i){t&1&&C(0,"tr",27)}function Pt(t,i){if(t&1&&(n(0,"table",8),d(1,9),r(2,st,2,0,"th",10)(3,_t,2,1,"td",11),s(),d(4,12),r(5,ft,2,0,"th",10)(6,ut,2,1,"td",11),s(),d(7,13),r(8,Ct,2,0,"th",10)(9,gt,3,3,"td",11),s(),d(10,14),r(11,vt,2,0,"th",10)(12,ht,3,4,"td",11),s(),d(13,15),r(14,bt,2,0,"th",10)(15,St,3,4,"td",11),s(),d(16,16),r(17,xt,2,0,"th",10)(18,It,3,4,"td",11),s(),d(19,17),r(20,Mt,2,0,"th",10)(21,Lt,3,2,"td",11),s(),d(22,18),r(23,wt,2,0,"th",10)(24,Et,7,3,"td",11),s(),r(25,Tt,1,0,"tr",19)(26,Dt,1,0,"tr",20),a()),t&2){let e=b();p("dataSource",e.dataSource),l(25),p("matHeaderRowDef",e.displayedColumns),l(),p("matRowDefColumns",e.displayedColumns)}}var Qt=(()=>{class t{constructor(e){this.billingService=e,this.displayedColumns=["invoiceNumber","patient","date","total","paid","balance","status","actions"],this.dataSource=new nt,this.isLoading=!1,this.pageSize=10,this.totalElements=0}ngOnInit(){this.loadInvoices()}loadInvoices(e=0){this.isLoading=!0,this.billingService.getInvoices(e,this.pageSize).subscribe({next:m=>{this.dataSource.data=m.content,this.totalElements=m.totalElements,this.isLoading=!1},error:()=>{this.isLoading=!1}})}onPageChange(e){this.pageSize=e.pageSize,this.loadInvoices(e.pageIndex)}downloadPdf(e){this.billingService.generateInvoicePdf(e).subscribe({next:m=>{let c=window.URL.createObjectURL(m),_=document.createElement("a");_.href=c,_.download=`invoice-${e}.pdf`,_.click(),window.URL.revokeObjectURL(c)}})}static{this.\u0275fac=function(m){return new(m||t)(M(rt))}}static{this.\u0275cmp=S({type:t,selectors:[["app-invoice-list"]],standalone:!0,features:[w],decls:13,vars:6,consts:[[1,"container"],[1,"page-header-row"],["mat-raised-button","","color","primary","routerLink","/billing/new"],["class","loading-spinner",4,"ngIf"],["mat-table","","class","full-width",3,"dataSource",4,"ngIf"],[3,"page","length","pageSize","pageSizeOptions"],[1,"loading-spinner"],["diameter","40"],["mat-table","",1,"full-width",3,"dataSource"],["matColumnDef","invoiceNumber"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","patient"],["matColumnDef","date"],["matColumnDef","total"],["matColumnDef","paid"],["matColumnDef","balance"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"status-chip",3,"ngClass"],["mat-icon-button","",3,"routerLink"],["mat-icon-button","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(m,c){m&1&&(n(0,"div",0)(1,"div",1)(2,"h1"),o(3,"Billing & Invoices"),a(),n(4,"button",2)(5,"mat-icon"),o(6,"receipt"),a(),o(7," Create Invoice "),a()(),n(8,"mat-card")(9,"mat-card-content"),r(10,dt,2,0,"div",3)(11,Pt,27,3,"table",4),n(12,"mat-paginator",5),h("page",function(mt){return c.onPageChange(mt)}),a()()()()),m&2&&(l(10),p("ngIf",c.isLoading),l(),p("ngIf",!c.isLoading),l(),p("length",c.totalElements)("pageSize",c.pageSize)("pageSizeOptions",E(5,ct)))},dependencies:[R,P,y,O,k,$,it,G,K,Y,Q,J,Z,W,X,tt,et,lt,ot,U,A,F,H,z,B,j,N,at,q,V],styles:[".page-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.full-width[_ngcontent-%COMP%]{width:100%}.loading-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:40px}.status-chip[_ngcontent-%COMP%]{padding:4px 12px;border-radius:16px;font-size:12px;font-weight:500}.status-chip.paid[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.status-chip.pending[_ngcontent-%COMP%]{background-color:#ff9800;color:#fff}.status-chip.partial[_ngcontent-%COMP%]{background-color:#2196f3;color:#fff}.status-chip.overdue[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}.status-chip.cancelled[_ngcontent-%COMP%]{background-color:#9e9e9e;color:#fff}"]})}}return t})();export{Qt as InvoiceListComponent};

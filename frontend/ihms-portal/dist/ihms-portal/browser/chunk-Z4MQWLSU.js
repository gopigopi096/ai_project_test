import{a as pe,b as se,c as ue,d as fe}from"./chunk-WP5NUATV.js";import{a as re,b as me}from"./chunk-CJI4PPME.js";import{a as oe,b as le}from"./chunk-EF2XRC37.js";import"./chunk-5SHJWNIK.js";import{b as te,c as ie}from"./chunk-AM5E43BK.js";import{a as W,b as X,d as Y,g as ee}from"./chunk-RKG5H5Y5.js";import{a as de}from"./chunk-Y6WQ7ZDX.js";import"./chunk-DABKM3GA.js";import{a as ne,b as ae}from"./chunk-5JXYUGER.js";import"./chunk-TR43IUZ2.js";import"./chunk-ZXLXF7DL.js";import{a as J,c as K,g as Q}from"./chunk-GQNV5PIV.js";import{b as G,d as p,f as V,g as j,j as R,l as z,m as U,o as H,p as Z,r as $}from"./chunk-WSFNJNB2.js";import{Bb as F,Da as t,Dc as O,Ea as e,Fa as n,Ib as _,Ja as M,Kb as B,Lb as k,Ma as v,Mc as A,Oa as C,Qc as T,Rc as q,S,Sc as w,Tc as L,Uc as D,Va as b,W as g,Wa as i,X as x,Xa as I,Ya as N,db as y,fa as l,ga as u,sa as h,ua as s,wb as P}from"./chunk-GX3TN4JH.js";import{a as f,b as c}from"./chunk-35PI25VP.js";function Ee(o,ce){o&1&&n(0,"mat-spinner",46)}function Se(o,ce){if(o&1&&(t(0,"span"),i(1),e()),o&2){let a=C();l(),N("",a.isEditMode?"Update":"Create"," Patient")}}var Ue=(()=>{class o{constructor(a,r,m,d,E){this.fb=a,this.route=r,this.router=m,this.patientService=d,this.snackBar=E,this.isEditMode=!1,this.isLoading=!1,this.patientId=null,this.patientForm=this.fb.group({firstName:["",p.required],lastName:["",p.required],email:["",[p.required,p.email]],phone:["",p.required],dateOfBirth:["",p.required],gender:["",p.required],bloodType:[""],address:this.fb.group({street:[""],city:[""],state:[""],zipCode:[""],country:[""]}),emergencyContact:this.fb.group({name:[""],relationship:[""],phone:[""]}),allergiesText:[""],medicalNotes:[""]})}ngOnInit(){let a=this.route.snapshot.paramMap.get("id");a&&(this.isEditMode=!0,this.patientId=+a,this.loadPatient(this.patientId))}loadPatient(a){this.patientService.getPatient(a).subscribe({next:r=>{this.patientForm.patchValue(c(f({},r),{allergiesText:r.allergies?.join(", ")||""}))},error:()=>{this.router.navigate(["/patients"])}})}onSubmit(){if(this.patientForm.invalid)return;this.isLoading=!0;let a=this.patientForm.value,r=c(f({},a),{allergies:a.allergiesText?a.allergiesText.split(",").map(d=>d.trim()):[]});delete r.allergiesText,(this.isEditMode?this.patientService.updatePatient(this.patientId,r):this.patientService.createPatient(r)).subscribe({next:()=>{this.snackBar.open(`Patient ${this.isEditMode?"updated":"created"} successfully`,"Close",{duration:3e3}),this.router.navigate(["/patients"])},error:()=>{this.isLoading=!1,this.snackBar.open("An error occurred. Please try again.","Close",{duration:3e3})}})}static{this.\u0275fac=function(r){return new(r||o)(u(Z),u(_),u(B),u(de),u(re))}}static{this.\u0275cmp=S({type:o,selectors:[["app-patient-form"]],standalone:!0,features:[y],decls:140,vars:7,consts:[["picker",""],[1,"container"],[1,"page-header-row"],["mat-icon-button","","routerLink","/patients"],[1,"inline-header"],[1,"form-container"],[3,"ngSubmit","formGroup"],[1,"form-row"],["appearance","outline"],["matInput","","formControlName","firstName"],["matInput","","formControlName","lastName"],["matInput","","formControlName","email","type","email"],["matInput","","formControlName","phone"],["matInput","","formControlName","dateOfBirth",3,"matDatepicker"],["matSuffix","",3,"for"],["formControlName","gender"],["value","MALE"],["value","FEMALE"],["value","OTHER"],["appearance","outline",1,"form-field-full"],["formControlName","bloodType"],["value",""],["value","A+"],["value","A-"],["value","B+"],["value","B-"],["value","AB+"],["value","AB-"],["value","O+"],["value","O-"],["formGroupName","address"],["matInput","","formControlName","street"],["matInput","","formControlName","city"],["matInput","","formControlName","state"],["matInput","","formControlName","zipCode"],["matInput","","formControlName","country"],["formGroupName","emergencyContact"],["matInput","","formControlName","name"],["matInput","","formControlName","relationship"],["matInput","","formControlName","allergiesText","placeholder","e.g., Penicillin, Peanuts"],["matInput","","formControlName","medicalNotes","rows","4"],[1,"actions-row"],["mat-button","","type","button","routerLink","/patients"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["diameter","20",4,"ngIf"],[4,"ngIf"],["diameter","20"]],template:function(r,m){if(r&1){let d=M();t(0,"div",1)(1,"div",2)(2,"div")(3,"button",3)(4,"mat-icon"),i(5,"arrow_back"),e()(),t(6,"h1",4),i(7),e()()(),t(8,"mat-card",5)(9,"mat-card-content")(10,"form",6),v("ngSubmit",function(){return g(d),x(m.onSubmit())}),t(11,"h3"),i(12,"Personal Information"),e(),t(13,"div",7)(14,"mat-form-field",8)(15,"mat-label"),i(16,"First Name"),e(),n(17,"input",9),t(18,"mat-error"),i(19,"First name is required"),e()(),t(20,"mat-form-field",8)(21,"mat-label"),i(22,"Last Name"),e(),n(23,"input",10),t(24,"mat-error"),i(25,"Last name is required"),e()()(),t(26,"div",7)(27,"mat-form-field",8)(28,"mat-label"),i(29,"Email"),e(),n(30,"input",11),t(31,"mat-error"),i(32,"Valid email is required"),e()(),t(33,"mat-form-field",8)(34,"mat-label"),i(35,"Phone"),e(),n(36,"input",12),t(37,"mat-error"),i(38,"Phone is required"),e()()(),t(39,"div",7)(40,"mat-form-field",8)(41,"mat-label"),i(42,"Date of Birth"),e(),n(43,"input",13)(44,"mat-datepicker-toggle",14)(45,"mat-datepicker",null,0),t(47,"mat-error"),i(48,"Date of birth is required"),e()(),t(49,"mat-form-field",8)(50,"mat-label"),i(51,"Gender"),e(),t(52,"mat-select",15)(53,"mat-option",16),i(54,"Male"),e(),t(55,"mat-option",17),i(56,"Female"),e(),t(57,"mat-option",18),i(58,"Other"),e()(),t(59,"mat-error"),i(60,"Gender is required"),e()()(),t(61,"mat-form-field",19)(62,"mat-label"),i(63,"Blood Type"),e(),t(64,"mat-select",20)(65,"mat-option",21),i(66,"Unknown"),e(),t(67,"mat-option",22),i(68,"A+"),e(),t(69,"mat-option",23),i(70,"A-"),e(),t(71,"mat-option",24),i(72,"B+"),e(),t(73,"mat-option",25),i(74,"B-"),e(),t(75,"mat-option",26),i(76,"AB+"),e(),t(77,"mat-option",27),i(78,"AB-"),e(),t(79,"mat-option",28),i(80,"O+"),e(),t(81,"mat-option",29),i(82,"O-"),e()()(),t(83,"h3"),i(84,"Address"),e(),t(85,"div",30)(86,"mat-form-field",19)(87,"mat-label"),i(88,"Street"),e(),n(89,"input",31),e(),t(90,"div",7)(91,"mat-form-field",8)(92,"mat-label"),i(93,"City"),e(),n(94,"input",32),e(),t(95,"mat-form-field",8)(96,"mat-label"),i(97,"State"),e(),n(98,"input",33),e()(),t(99,"div",7)(100,"mat-form-field",8)(101,"mat-label"),i(102,"Zip Code"),e(),n(103,"input",34),e(),t(104,"mat-form-field",8)(105,"mat-label"),i(106,"Country"),e(),n(107,"input",35),e()()(),t(108,"h3"),i(109,"Emergency Contact"),e(),t(110,"div",36)(111,"div",7)(112,"mat-form-field",8)(113,"mat-label"),i(114,"Contact Name"),e(),n(115,"input",37),e(),t(116,"mat-form-field",8)(117,"mat-label"),i(118,"Relationship"),e(),n(119,"input",38),e()(),t(120,"mat-form-field",19)(121,"mat-label"),i(122,"Contact Phone"),e(),n(123,"input",12),e()(),t(124,"h3"),i(125,"Medical Information"),e(),t(126,"mat-form-field",19)(127,"mat-label"),i(128,"Allergies (comma-separated)"),e(),n(129,"input",39),e(),t(130,"mat-form-field",19)(131,"mat-label"),i(132,"Medical Notes"),e(),n(133,"textarea",40),e(),t(134,"div",41)(135,"button",42),i(136,"Cancel"),e(),t(137,"button",43),h(138,Ee,1,0,"mat-spinner",44)(139,Se,2,1,"span",45),e()()()()()()}if(r&2){let d=b(46);l(7),I(m.isEditMode?"Edit Patient":"New Patient"),l(3),s("formGroup",m.patientForm),l(33),s("matDatepicker",d),l(),s("for",d),l(93),s("disabled",m.isLoading||m.patientForm.invalid),l(),s("ngIf",m.isLoading),l(),s("ngIf",!m.isLoading)}},dependencies:[F,P,$,R,G,V,j,z,H,U,k,Q,J,K,ie,te,ee,W,X,Y,w,T,q,D,L,le,oe,A,fe,pe,se,ue,O,me,ae,ne],styles:[".page-header-row[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:24px}.inline-header[_ngcontent-%COMP%]{display:inline;margin-left:8px}.form-row[_ngcontent-%COMP%]{display:flex;gap:16px}.form-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1}h3[_ngcontent-%COMP%]{margin-top:24px;margin-bottom:16px;color:#666}h3[_ngcontent-%COMP%]:first-of-type{margin-top:0}"]})}}return o})();export{Ue as PatientFormComponent};
